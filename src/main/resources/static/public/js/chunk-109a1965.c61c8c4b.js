(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-109a1965"],{"2dec":function(e,t,o){},bb2a:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),c=Object(n["createElementVNode"])("h3",null,"帳號列表",-1),r=Object(n["createTextVNode"])("修改"),l=Object(n["createTextVNode"])("刪除"),a=Object(n["createTextVNode"])("新增帳號"),u=Object(n["createTextVNode"])("管理員"),d=Object(n["createTextVNode"])("護理長"),i=Object(n["createTextVNode"])("供應室職員"),b=Object(n["createTextVNode"])("病房職員"),s={class:"dialog-footer"},f=Object(n["createTextVNode"])("確定"),O=Object(n["createTextVNode"])("取消"),j=Object(n["createTextVNode"])("管理員"),m=Object(n["createTextVNode"])("護理長"),p=Object(n["createTextVNode"])("供應室職員"),V=Object(n["createTextVNode"])("病房職員"),h={class:"dialog-footer"},C=Object(n["createTextVNode"])("確定"),g=Object(n["createTextVNode"])("取消");function N(e,t,o,N,w,x){var k=Object(n["resolveComponent"])("search"),v=Object(n["resolveComponent"])("el-icon"),_=Object(n["resolveComponent"])("el-button"),F=Object(n["resolveComponent"])("el-input"),y=Object(n["resolveComponent"])("el-col"),D=Object(n["resolveComponent"])("el-option"),B=Object(n["resolveComponent"])("el-select"),A=Object(n["resolveComponent"])("el-row"),E=Object(n["resolveComponent"])("el-pagination"),L=Object(n["resolveComponent"])("el-table-column"),T=Object(n["resolveComponent"])("el-table"),U=Object(n["resolveComponent"])("el-form-item"),I=Object(n["resolveComponent"])("el-radio"),q=Object(n["resolveComponent"])("el-radio-group"),$=Object(n["resolveComponent"])("el-checkbox"),P=Object(n["resolveComponent"])("el-checkbox-group"),R=Object(n["resolveComponent"])("el-form"),M=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[c,Object(n["createVNode"])(A,{class:"bgcolor"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{span:5,offset:1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{placeholder:"員工名稱 / 員工代號",modelValue:w.queryInfo.searchName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return w.queryInfo.searchName=e}),clearable:"",onClear:x.getAccountList,onKeyup:Object(n["withKeys"])(x.getAccountList,["enter"])},{append:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{class:"search_button",onClick:x.getAccountList},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k)]})),_:1})]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","onClear","onKeyup"])]})),_:1}),Object(n["createVNode"])(y,{span:4,offset:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{modelValue:w.queryInfo.empNO,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.queryInfo.empNO=e}),placeholder:"部門",clearable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.depnoList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:e.DEPNO,label:e.DEPNAME,value:e.DEPNO},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(A,{class:"elPagination"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{xs:{span:6},md:{span:6,offset:18}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{"current-page":w.queryInfo.pageno,"page-size":w.queryInfo.pagesize,layout:"total, prev, pager, next, jumper",total:w.total,onCurrentChange:x.handleCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"])]})),_:1})]})),_:1}),Object(n["createVNode"])(T,{data:w.accountList,style:{width:"100%"},class:"elTable",border:"","cell-style":{borderColor:"black"},"header-cell-style":{borderColor:"black"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{type:"index",label:"編號",width:"80"}),Object(n["createVNode"])(L,{prop:"userno",label:"員工代號"}),Object(n["createVNode"])(L,{prop:"usercname",label:"員工姓名"}),Object(n["createVNode"])(L,{prop:"depno",label:"部門"}),Object(n["createVNode"])(L,{label:"權限"},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(w.privilegens[e.row.systemprivilege]),1)]})),_:1}),Object(n["createVNode"])(L,{label:"操作"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(_,{class:"edit_button",onClick:function(t){return x.showEditDialon(e.row.id)}},{default:Object(n["withCtx"])((function(){return[r]})),_:2},1032,["onClick"]),Object(n["createVNode"])(_,{class:"delete_button",onClick:function(t){return x.deleteAccount(e.row.id,e.row.usercname)}},{default:Object(n["withCtx"])((function(){return[l]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(n["createVNode"])(_,{class:"edit_button",onClick:t[2]||(t[2]=function(e){return w.addDialogVisible=!0})},{default:Object(n["withCtx"])((function(){return[a]})),_:1}),Object(n["createVNode"])(M,{modelValue:w.addDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=function(e){return w.addDialogVisible=e}),onClose:x.addDialogClosed,width:"40%",title:"添加帳號"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{ref:"addFormRef",model:w.addForm,"label-width":"80px",rules:w.addFormRules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{label:"員工代號",prop:"userno"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.addForm.userno,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.addForm.userno=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"部門",prop:"depno"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{modelValue:w.addForm.depno,"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.addForm.depno=e}),placeholder:"部門",clearable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.depnoList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:e.DEPNO,label:e.DEPNAME,value:e.DEPNO},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"姓名",prop:"usercname"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.addForm.usercname,"onUpdate:modelValue":t[5]||(t[5]=function(e){return w.addForm.usercname=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"密碼",prop:"userpwd"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.addForm.userpwd,"onUpdate:modelValue":t[6]||(t[6]=function(e){return w.addForm.userpwd=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"權限",prop:"systemprivilege"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{modelValue:w.addForm.systemprivilege,"onUpdate:modelValue":t[7]||(t[7]=function(e){return w.addForm.systemprivilege=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{label:"A"},{default:Object(n["withCtx"])((function(){return[u]})),_:1}),Object(n["createVNode"])(I,{label:"B"},{default:Object(n["withCtx"])((function(){return[d]})),_:1}),Object(n["createVNode"])(I,{label:"C"},{default:Object(n["withCtx"])((function(){return[i]})),_:1}),Object(n["createVNode"])(I,{label:"D"},{default:Object(n["withCtx"])((function(){return[b]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.auth,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(U,{key:e.oneId,label:e.oneName},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])($,{label:e.oneId,modelValue:w.ids,"onUpdate:modelValue":t[8]||(t[8]=function(e){return w.ids=e}),checked:""},null,8,["label","modelValue"]),[[n["vShow"],!1]]),Object(n["createVNode"])(U,null,{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.twoMenuList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(P,{modelValue:w.ids,"onUpdate:modelValue":t[9]||(t[9]=function(e){return w.ids=e}),key:e.twoId},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{label:e.twoName},null,8,["label"])]})),_:2},1032,["modelValue"])})),128))]})),_:2},1024)]})),_:2},1032,["label"])})),128))]})),_:1},8,["model","rules"])]})),footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(_,{class:"edit_button",onClick:x.addAccount},{default:Object(n["withCtx"])((function(){return[f]})),_:1},8,["onClick"]),Object(n["createVNode"])(_,{type:"info",onClick:t[10]||(t[10]=function(e){return w.addDialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[O]})),_:1})])]})),_:1},8,["modelValue","onClose"]),Object(n["createVNode"])(M,{modelValue:w.editDialogVisible,"onUpdate:modelValue":t[20]||(t[20]=function(e){return w.editDialogVisible=e}),onClose:x.editDialogClosed,width:"40%",title:"修改帳號"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{ref:"addFormRef",model:w.editForm,"label-width":"80px",rules:w.addFormRules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{label:"員工編號",prop:"userno"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.editForm.userno,"onUpdate:modelValue":t[12]||(t[12]=function(e){return w.editForm.userno=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"部門",prop:"depno"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{modelValue:w.editForm.depno,"onUpdate:modelValue":t[13]||(t[13]=function(e){return w.editForm.depno=e}),placeholder:"部門",clearable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.depnoList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:e.DEPNO,label:e.DEPNAME,value:e.DEPNO},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"姓名",prop:"usercname"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.editForm.usercname,"onUpdate:modelValue":t[14]||(t[14]=function(e){return w.editForm.usercname=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"密碼",prop:"userpwd"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:w.editForm.userpwd,"onUpdate:modelValue":t[15]||(t[15]=function(e){return w.editForm.userpwd=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"權限",prop:"systemprivilege"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{modelValue:w.editForm.systemprivilege,"onUpdate:modelValue":t[16]||(t[16]=function(e){return w.editForm.systemprivilege=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{label:"A"},{default:Object(n["withCtx"])((function(){return[j]})),_:1}),Object(n["createVNode"])(I,{label:"B"},{default:Object(n["withCtx"])((function(){return[m]})),_:1}),Object(n["createVNode"])(I,{label:"C"},{default:Object(n["withCtx"])((function(){return[p]})),_:1}),Object(n["createVNode"])(I,{label:"D"},{default:Object(n["withCtx"])((function(){return[V]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.auth,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(U,{key:e.oneId,label:e.oneName},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])($,{label:e.oneId,modelValue:w.ids,"onUpdate:modelValue":t[17]||(t[17]=function(e){return w.ids=e}),checked:""},null,8,["label","modelValue"]),[[n["vShow"],!1]]),Object(n["createVNode"])(U,null,{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.twoMenuList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(P,{modelValue:w.ids,"onUpdate:modelValue":t[18]||(t[18]=function(e){return w.ids=e}),key:e.twoId},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{label:e.twoName},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.twoName),1)]})),_:2},1032,["label"])]})),_:2},1032,["modelValue"])})),128))]})),_:2},1024)]})),_:2},1032,["label"])})),128))]})),_:1},8,["model","rules"])]})),footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(_,{class:"edit_button",onClick:x.editAccount},{default:Object(n["withCtx"])((function(){return[C]})),_:1},8,["onClick"]),Object(n["createVNode"])(_,{type:"info",onClick:t[19]||(t[19]=function(e){return w.editDialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[g]})),_:1})])]})),_:1},8,["modelValue","onClose"])],64)}o("d3b7"),o("159b");var w={data:function(){return{depnoList:[],queryInfo:{empNO:"",searchName:"",pageno:"",pagesize:""},accountList:[],privilegens:{A:"管理人員",B:"護理長",C:"供應中心職員",D:"病房人員"},total:"",addDialogVisible:!1,editDialogVisible:!1,addForm:{userno:"",depno:"",usercname:"",userpwd:"",systemprivilege:"",ids:""},editForm:{},ids:[],auth:[],addFormRules:{userno:[{required:!0,message:"請輸入...",trigger:"blur"},{min:3,max:10,message:"長度3~10",trigger:"blur"}],depno:[{required:!0,message:"請輸入...",trigger:"blur"}],usercname:[{required:!0,message:"請輸入...",trigger:"blur"},{min:3,max:10,message:"長度3~10",trigger:"blur"}],userpwd:[{required:!0,message:"請輸入...",trigger:"blur"},{min:3,max:10,message:"長度3~10",trigger:"blur"}],systemprivilege:[{required:!0,message:"請輸入...",trigger:"blur"}]}}},created:function(){this.getDepNo(),this.getAccountList(),this.getAuth()},methods:{getDepNo:function(){var e=this;this.$axios.get("/account/depno").then((function(t){e.depnoList=t.data.data}))},getAccountList:function(){var e=this;this.$axios.get("/account",this.queryInfo).then((function(t){e.total=t.data.data.total,e.accountList=t.data.data.list}))},getAuth:function(){var e=this;this.$axios.get("/auth").then((function(t){e.auth=t.data.data}))},handleCurrentChange:function(e){this.queryInfo.pageno=e,this.getAccountList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields(),this.ids=[]},editDialogClosed:function(){this.$refs.addFormRef.resetFields(),this.ids=[]},addAccount:function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){for(var o=0;o<e.ids.length;o++)e.addForm.ids=e.addForm.ids+","+e.ids[o];e.addForm.ids=e.addForm.ids.substring(1),e.$axios.post("/account",e.addForm).then((function(){e.addDialogVisible=!1,e.getAccountList()}))}}))},editAccount:function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){e.editForm["ids"]="";for(var o=0;o<e.ids.length;o++)e.editForm.ids=e.editForm.ids+","+e.ids[o];e.editForm.ids=e.editForm.ids.substring(1),console.log(e.editForm.userno),e.$axios.put("/account/"+e.editForm.id,e.editForm).then((function(){e.editDialogVisible=!1,e.getAccountList()}))}}))},showEditDialon:function(e){var t=this;this.$axios.get("/account/"+e).then((function(e){t.editForm=e.data.data;var o=[];e.data.data.csrAccountAuths.forEach((function(e){o.push(e.csrAuth.id)})),t.ids=o})),this.editDialogVisible=!0},deleteAccount:function(e,t){var o=this;this.$msgbox.confirm("確定要刪除 "+t+" ?","刪除",{cancelButtonText:"取消",confirmButtonText:"確定",type:"warning"}).then((function(){o.$axios.remove("/account/"+e).then((function(){o.getAccountList()}))})).catch((function(){}))}}},x=(o("cf35"),o("6b0d")),k=o.n(x);const v=k()(w,[["render",N]]);t["default"]=v},cf35:function(e,t,o){"use strict";o("2dec")}}]);
//# sourceMappingURL=chunk-109a1965.c61c8c4b.js.map